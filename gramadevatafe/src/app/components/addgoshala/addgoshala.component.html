<div class="container py-4 header-m " style="margin-top: 100px;">
  <ngx-spinner bdOpacity=0.9 bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff"
			type="ball-spin-clockwise">
		</ngx-spinner>
    <div class="form-card">
        <ngx-spinner bdOpacity="0.9" bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
        </ngx-spinner>
        <form [formGroup]="goshalaForm" class="p-5">
            <div class="row">
                <h3 class="section-header-title text-center">Add Goshala</h3>
            </div>
            <div class="temple-form-heading pt-5">
                <h3>Goshala Details</h3>
                <hr>
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="goshalanmae">Goshala Name*</label>
                            <input type="text" class="form-control" id="templeName" formControlName="name" placeholder="Enter the Goshala's name">
                            <div *ngIf="goshalaForm.get('name')?.invalid && (goshalaForm.get('name')?.dirty || goshalaForm.get('name')?.touched)" class="text-danger">
                              Goshala name is required
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="GoshalaCategory">Goshala Category*</label>
                            <select class="form-control" id="goshalaCategory" formControlName="category">
                                <option *ngFor="let option of goshalaCategoryoptions" [value]="option.value">{{ option.label }}</option>
                              </select>
                              <div *ngIf="goshalaForm.get('category')?.invalid && (goshalaForm.get('category')?.dirty || goshalaForm.get('category')?.touched)" class="text-danger">
                                Goshala Category is required
                              </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                  <div class="col-md-4">
                      <div class="form-group">
                          <label for="goshalanmae">Contact Name*</label>
                          <input type="text" class="form-control" id="templeName" formControlName="contact_name" placeholder="Enter the Contact's name">
                          <div *ngIf="goshalaForm.get('contact_name')?.invalid && (goshalaForm.get('contact_name')?.dirty || goshalaForm.get('contact_name')?.touched)" class="text-danger">
                            Contact Name is required
                          </div>
                      </div>
                  </div>
                  <div class="col-md-4">
                      <div class="form-group">
                          <label for="GoshalaCategory">Contact Phone*</label>
                          <input type="text" class="form-control" id="templeName" formControlName="contact_phone" placeholder="Enter the Contact's name">
                          <div *ngIf="goshalaForm.get('contact_phone')?.invalid && (goshalaForm.get('contact_phone')?.dirty || goshalaForm.get('contact_phone')?.touched)" class="text-danger">
                            Contact Phone is required
                          </div>
                      </div>
                  </div>
                  
                    <div class="col-md-4">
                       <div class="form-group">
                        <label for="registartion numer">Registration Number</label>
                        <input type="text" class="form-control" id="reg_num" formControlName="reg_num" placeholder="Enter the Registration Number ">
                        <div *ngIf="goshalaForm.get('reg_num')?.invalid && (goshalaForm.get('reg_num')?.dirty || goshalaForm.get('reg_num')?.touched)" class="text-danger">
                          Registration Number is required
                        </div>
                       </div> 
                    </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label for="map_location">Goshala Map Location (URL) *</label>
                    <div class="input-group">
                      <input
                        type="url"
                        class="form-control"
                        id="map_location"
                        formControlName="map_location"
                        placeholder="https://example.com/map"
                      />
                      <div class="input-group-append">
                        <button
                          type="button"
                          class="btn btn-outline-secondary"
                          (click)="getCurrentLocation()"
                          title="Fetch Current Location"
                        >
                          üìç Get Location
                        </button>
                      </div>
                    </div>
                    <small class="form-text text-muted">
                      Please provide a valid URL for the Goshala's map location.
                    </small>
                    <div
                      *ngIf="goshalaForm.get('map_location')?.invalid && (goshalaForm.get('map_location')?.dirty || goshalaForm.get('map_location')?.touched)"
                      class="text-danger"
                    >
                      Please enter a valid URL for the Goshala Map Location.
                    </div>
                  </div>
                </div>
              </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="address">Description</label>
                      <textarea class="form-control" id="desc" formControlName="desc" placeholder="Describe about the temple in less than 4500 words" rows="3"></textarea>
                    </div> 
                  </div>
              </div>
                
                <div class="row">
                    <div class="col-md-12">
                       <div class="form-group">
                        <label for="address">Address *</label>
                        <input type="text" class="form-control" id="address" formControlName="address" placeholder="Enter the address">
                        <div *ngIf="goshalaForm.get('address')?.invalid && (goshalaForm.get('address')?.dirty || goshalaForm.get('address')?.touched)" class="text-danger">
                          Address is required
                        </div>
                       </div> 
                    </div>
                </div>
                <div class="row">
                
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a country">
                        <label for="country">Country</label>
                        <nz-select 
                          formControlName="country" 
                          nzPlaceHolder="Select country" 
                          [nzShowSearch]="true">
                          <nz-option 
                            *ngFor="let option of CountryOptions" 
                            [nzValue]="option.value" 
                            [nzLabel]="option.label">
                          </nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a state">
                        <label for="state">State *</label>
                        <nz-select 
                          formControlName="state" 
                          nzPlaceHolder="Select state" 
                          [nzShowSearch]="true">
                          <nz-option 
                            *ngFor="let option of StateOptions" 
                            [nzValue]="option.value" 
                            [nzLabel]="option.label">
                          </nz-option>
                        </nz-select>
                      </nz-form-control>
                      <div *ngIf="goshalaForm.get('state')?.invalid && (goshalaForm.get('state')?.dirty || goshalaForm.get('state')?.touched)" class="text-danger">
                        State is required
                      </div>
                    </nz-form-item>
                  </div>
                  
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a district">
                        <label for="district">District *</label>
                        <nz-select 
                          formControlName="district" 
                          nzPlaceHolder="Select district" 
                          [nzShowSearch]="true">
                          <nz-option 
                            *ngFor="let option of DistrictOptions" 
                            [nzValue]="option.value" 
                            [nzLabel]="option.label">
                          </nz-option>
                        </nz-select>
                      </nz-form-control>
                      <div *ngIf="goshalaForm.get('district')?.invalid && (goshalaForm.get('district')?.dirty || goshalaForm.get('district')?.touched)" class="text-danger">
                        District is required
                      </div>
                    </nz-form-item>
                  </div>
                  
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a mandal">
                        <label for="mandal">Mandal *</label>
                        <nz-select 
                          formControlName="mandal" 
                          nzPlaceHolder="Select mandal" 
                          [nzShowSearch]="true" 
                          [nzDisabled]="!goshalaForm.get('district')?.value">
                          <nz-option 
                            *ngFor="let option of MandalOptions" 
                            [nzValue]="option.value" 
                            [nzLabel]="option.label">
                          </nz-option>
                        </nz-select>
                      </nz-form-control>
                      <div *ngIf="goshalaForm.get('mandal')?.invalid && (goshalaForm.get('mandal')?.dirty || goshalaForm.get('mandal')?.touched)" class="text-danger">
                        Mandal is required
                      </div>
                    </nz-form-item>
                  </div>
                  
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a village">
                        <label for="village">Village *</label>
                        <nz-select 
                          formControlName="object_id" 
                          nzPlaceHolder="Select village" 
                          [nzShowSearch]="true">
                          <nz-option 
                            *ngFor="let option of VillageOptions" 
                            [nzValue]="option.value" 
                            [nzLabel]="option.label">
                          </nz-option>
                        </nz-select>
                      </nz-form-control>
                      <div *ngIf="goshalaForm.get('object_id')?.invalid && (goshalaForm.get('object_id')?.dirty || goshalaForm.get('object_id')?.touched)" class="text-danger">
                        Village is required
                      </div>
                    </nz-form-item>
                  </div>
                  </div>
                  
                  <!-- <div class="row">
                    <div class="col-md-4">
                        <label>Banner Image</label>
                        <nz-upload nzListType="picture-card" [(nzFileList)]="bannerFileList" [nzShowButton]="bannerFileList.length < 1"
                         (nzChange)="handleBannerFileChange($event)" [nzAccept]="'image/*'">
                         <div>
                            <i nz-icon nzType="plus"></i>
                            Upload banner
                          </div>
                        </nz-upload>
                    </div>

                  </div> -->
                  <div class="row">
                    <div class="col-md-4">
                      <label>Banner image *</label>
                      <nz-upload
                        nzListType="picture-card"
                        [(nzFileList)]="bannerFileList"
                        [nzShowButton]="bannerFileList.length < 1"
                        (nzChange)="handleBannerFileChange($event)"
                        [nzAccept]="'image/*'"
                        (nzRemove)="handleBannerFileRemove()">
                        <div>
                          <i nz-icon nzType="plus"></i>
                          Upload banner
                        </div>
                      </nz-upload>
                      <div *ngIf="!bannerFileList.length" class="text-danger">
                        Image is required.
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-12">
                      

                        <div class="text-center">
                          <button type="button" (click)="onSubmit()" style="border-width: 0px;background-color: rgb(241, 124, 15);border-radius:20px;color: white; padding: 15px;"> Submit </button>
                        </div>
                    </div>
                  </div>
            </div>
        </form>
    </div>
</div>